// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.19;

import "forge-std/Test.sol";
import "forge-std/console.sol";
import "../src/InflateLib.sol";
import "../src/Inflate2.sol";
import "./LibContractStorage.sol";

contract InflateTest is Inflate2, Test {
    using LibContractStorage for bytes;
    using LibContractStorage for address;
    address zippedInitCodeAt;
    uint256 constant UNZIPPED_SIZE = 24427;

    constructor() {
        // Zipped up renderer contract from shields.build
        bytes memory zippedInitCode =
            hex"c55c7d945d55759f376f26df1f33c9cc24042497d124a4702ff7fbde17080412d209ce2493a0efd51913eec964c29bfa26a3933040c466e6250181ae3a7c555a41a3aed2d66f2bd2054b85a5edb24b44bb9658415c95aad8fad1224b2d568474efb3f7fd785ff73d967f8826efbc7bf73977efdfde67efdf39e7be04b3c1b67df66caf68eb2a046db3af8e0e8bebae993dd8d67641d0960bda7ef95a50231074b85d22d306df9ce0f9f366c70e7ee8964f758bb6f71766c73ef6c41b1f84e6616ef688ecd5d0fcc273e34f43f306687ebd57d901cdbf81e637ef79d285e6b70b30567e9486e911eda7e1d6644f5b27343f0fcde343afbd08cd17a039fbfcbd0f4187deb083ddf79717c1c3be55a0668fc8fc33349d1bbf7321347f0dcdad7ff7a675d0770334df32fcf613d07c6bd87741be701ca43ae1d6f293f39ba0e94073c5c3461f34c7a1a92fd25f85e67d855169b4c8ac0f3a66ddec5c665e64d6dd352ffabcfca8e8e8cc8f06dbf68accc57065cd63f2cbec5dd9f95f82fc9e58fe9a48fe65967f7badfc8958fe7828dff91396fff35af94fc7f21f0be5173cc7f25fa895ff7e2cffdd507ee1532cfff31af9f695917cfb92507ed1e324df7e5eadfc15b1fc96507ef167597eb0567e2a96ffd3507ec94759fe965af90fc5f27f1dca2fbd8fe53f512bffcd58fe6ba1fcb2db58fe7bb5f26763f9df86f2cb6f26f9ecb21af9ec25917cf68f42f915ef60f9cb6ae5af8be54742f995fb59be542bffbe58fe8e50be6b0fcb3f502bff782cff5828df7d25cb7fbd56fec558fea7a1fc2a8be57f5723dfb15cf41ca50b41908194302b9bdba8b9766e5fa0644e0c8f4f2b3bc78f1e55c49143ca5b6e9c528645a9347eec681bff37b76f580a0699d9b9ee5ed171b8203ac645dfcff3a3a3f2bae87820c89e0eda828eb92ed1710aee9e146bbe077703a53db3f7e0d9b367fbc4eac2fc5df36367b18d33eaa9207b2be8233b7c1e3a3c9cde019496cff9f7bbc1c275a37c61ee64363bb76f1e4c010de787ef9a1fc6a1cfa659dc4116e7c5c4745bca7f551677fe49417416921677fe456c71e70cdcbda189c59d8fc71677fe2d7478a8258b3bff152d5e7f26cde2ce97d22c5e165bac5c79646c62fcc8b1162c5e704d412cd895b478c16c6cf18222dcbdbe89c50b3e1b5bbce0afa0c3fd2d59bce0cb68f1062bcde2053f6c31aa2190c76554e397edc5f199e9a9230d2c5e7859412cbc3469f1c2e9d8e2852370f76d4d2c5ef8d1d8e2857742873b5ab278e1c368f1c6b7a759bcf0db6916afab63f155627afa6665eab0b273ea86e9ba162fd20a62919ab478d1a1d8e2458370f7cd4d2c5e745f6cf1a2f740875b5ab278d14368f1a68fa759bce8ab2d5a1c65aec8fc8298b9b9aec58be1d6e2f5498b17e7638b175f0e77b736b178f16db1c58ba7a0c391962c5e7c3f5abc79679ac58b1f4db37821593c248e4e1d193fd46ae65ab2aa209674272d5e32105bbc4487bb9734b178c9cdb1c54b0474085ab278c91d68b1fe4a9ac54b3e9e66f1f90de6b174f8ae23872093211055162fed2888a5d9a4c54bb7c4162fed87bb1734b178e93b628b975e0b1df6b564f1d25bd062f34d69162f7d30cde24564f11f4f4f944ae2faf1167dbcf47f41c55f272d5e76716cf1b29e8258b6ba89c5cbf6c7162fbb1a3aec68c9e26547d0624749b378d9fb5aa84edba76e00674eab8dea7295c5cbfe0b54fccfa4c5cbcf8f2d5ebea020967736b178f99ed8e2e51e74705bb2787980166fb93ccde2e5732df878e7f4f8b163372bbb5af4f1f2ef828acf262d5ed18516b301bf81bb2f37b178c595683141b4627341acb8b0258b57ec438bb74fa459bce2689ac5e7d4cbd5a244c5696266bcbec52bbe0e2a3e99b478657bece3153f85bb3f6962f14a2bf6f1ca730b62e5ba962c5eb9032dde71779ac52bc7d32c5e5ce9e3464eaeb278e59740c52f5658fcabd8c72bbf07779f6b6271d786d8c75dcb0ba26b594b1677b968f1eea5691677155ae45cd78ad2b189e9ca74ddc0e2aecf808a9f4e5adcf5e3d8c75ddf80bb4f35b1b87b4dece3aeb3d0e1b5962ceebe102dde63a759dcbd2bcde273d338d7d513d7178fd5b3b8fb2305d1fde1a4c5ddcfc416773f01771f6f62f1aac5b1c5dd2f41875fb464f1aa7568f1f037d32c5e75690b513d2cde395e2a4d1db9b9b5a85e756f41acba2769f1aaafc551bdea1fe0ee679b59fc4a6cf1aa1f42871f34e9b01aeadf6d8ce96aa87fab9bd43f8668f5e5f72046fb5f4cc1280882b672d02e561741f2c0e9fce8f567f93f3476f51c3c6c56f43c890fdbb6777eb60cb8adcf04ebcfe9830794258e20f5b9c29c04a8dc3eeb9ef466cb99bb8661fc51f813b4cded85167cc0683dc5c209dd302ddb713d3f270e8e1d1a3f5c8d76b0f2d6bea00bedfc1d3cfa15b2735df09b73cb41e6a4e859815a7e3f3f3ab717447ad6c31c3e3f84229399ffb3b3e9ff9dd3373f17b4ad9bbf7638e8383d7fdebdc3b3605b302fae5b9d1f0595c5ea2fe6478767a17537fca98c9b8062a02dc8484b60fdd7737f2208f0fef03c74694398a835fb6af817e015ac3f99e963cc4fec1e78f7bb1a154a0942dbbee0caa0635ff0a6a0edd551d19b2d8b9ec7c0e8ccdc5c57e49f72f79a5ed10bfcaff7027210ee900e4bbddb44af237a1eca8fce0f8bde2bcbd0fbb760a074775ba23f7407fedb1bb07f95727b1814a436465639545af4de3e277adf055af488de7b790f1645e71c7cca437073363fcac081028f8bdec74e89de9dd8f322d46436504eb59fcc9c46fc7a9f85e73e237a4bf0dc93a36055afe86b2fcc8adeff796f59f4be3f3f7a0a403d95b9677818a23683e33f079e191ebee76e36b08c78ae127d1714449f227a3e8ffa77883eed54f9b4e8fd84f466a84a305b3e955d050f1802d941d1f319946d137da3209b117dcb2a84315a198272197428c3c3c37ba327a59e1f2c4080ef9d3b95d9c7baf59dccc32db0aaef9300cb29b881aa120c7d5f2a8bbe438041dfbfcc9d167d53f9d17ba0c33373a703e55678f82cdef98f39e9dd5399488f9602e48228408276980c6b2e2e88351751489229a0da9aad65b1e6dcc8f762cd107cbf04bd413e5db37f4eacb92a3f5adec758052721c64f66f69e2a6783b65b33b0509885f0e9fb9c042950e08e58731fea0ee3bc055c126c63e16d52f893b1f06cd20512c7b9b92c8e0d624fcf9d126bc6508dd761af19db8bb671cfcbde298e1595435bfb875c5df1cc19cf118eaec0ffe97f0ef831b3ef84bc52715d571d3def9923fdca61589ca082fb4e6ced7f639a1230b5418a805c7b7fb0fda458bb144d156b3f5a166b31ed6e473343acd73ecaae5ffb15703d8a82ebd77e2be1fad9a4cbfb2fb93cb6c5d0a531ae3ee0a39645531f21432675c5306d305133754fe10f32c980ff2b64085e9737a35baa31a3ba765135f519d71e91869c98b4753527ec9c96332d853f48ded4555b9f090294520d4776739c9149d5c71bd4c5a62e364c2f908a3a2ad051759c01579f31a087abab9e03760467500aec406b6038c6bd0af1e08908e073fe2f783a02785d07000c593f783a0218f14a77565b34d6baab836c3cd67059ac5b09d7b34967ad3b0c4fb89304a62187acfd14b5df5316e7fc9c9ab7974f4597ef85317c6c4220724eaa76a0a1b9aeab7839cd752c2567691639d0b2c0b1450bbe5b5649f5f143f15066c6b03537679303070df4a66e9284ad4a893c0d360231400e448c65271277cd921c8fa46754831c282592770672f4747e3839904686f961d95ace37af04e7fa860c0bfc80279ea17904cf713ccd83a883e7155578bee5d9e1509a74e0097cba1c055455310c7d7fd080e96958e68c6ae9c5e0790a2c1720f24ab51860a0599ac83060960c65df9b51715063d07325b4f0fc01d7043189989933312e3d4fea8c1f1491aea6db06cc1991d946665af6c8503c82e23bf021719d3175cd1519c2ccc0c15c0a72fce07944fddc199191a0a9265cb08d10fe011a7764080695be1219891af95f7a1ee645adc1222361b323cb74a9570eb0b5bdc8eb96c848dc68282bf47d723805dba25de2664761501b00a06f49b44bdc12bd4786926164d345d12e71cb1b3957b3242884b01b212c4111ed123757756754c4d1f6aa1f3832691b9a6897b881db55df44eb645c604a90330202d942e844fb9930261b5989238bf630dc345d37d4287842373144a25de24663985563c410892ce116866aa893ece6304493aac8728a55f441762b08d7f85564b745936fb02ade1ce9d8122a2db29c645977521d2649980130915abac84adc4ab55a57048dc84adcf0197a2e815e42511c42649fa099452325c14ba665917d3e4aa1eb6f17d957a31cba1ef3df19286dd957934974fdc7a324bafe1fe324bafecb65b1feddd4fc469c44d73fdb3489c69906673a4e714aa238c31d3937f14306a10af95675e1fb98a16b5c054d4fd55c43b135dfc59870cc1c06ab6e99f48d92285c33342b879c40335dcc069ae3f832aa1d74192551ba86824628a926252989bad1b50ac9684c4aa2e1c88dc6a4241a8eec24c6341c29e89838960c6a47f30101c3d172ae2787345d914cdd61128d41023c11260c654cdeaea53a569444bddc98ca70a849d555528593285f3c2a45429b49447ee3240a17d3467339894617190935892e7c70120d07af15a501388986aaf2a8799c9b30a16730364c634ce5245a31423d132889c2c591494ff37547715dcc796090661aaaa539b66a6a3e27514795375529c9eda4e19c44abd0ac81919368952a35307212ad42b306464ea255682661c4726a7312850e70cfb0154b333c34c474304e2c1799402e67711255e85b98fa61aee9a09791f3242984094a4994c442fa0989df30541383cf85b083c139890258b910d67a71c249b4015c91459c441bc095186d361aad16ae08274ea2b570558a7212adebd23c266e8a3a4aa22728f81a479de868ab30a13e3f6e131d4a9492379c273aac28256fd80449f6057c5fc04aa6e40d97472979c335714adef0d6b2d8b0829a224ec91b4a4d533255254d378d3c7a1d9819afb02074e00b7e50aab1a1d0a89607f40b8abc9ea3940c0167495e0b821e0e029c83098083758e5232de28417fd387313d586418928e5a94d32c8b5272443fe00fd224b30a33999209858d3b830f44486ddc0bb6df04d73f90046ae3f511501b8fc6406dfcb3b2d898a3e61d31501bef6b06942b712a4aabb086434927a024c9d68b0ead84e47da04658e87c602c57f20200a68f67ca59e4999586cec8051901257b17a9334c2c80ccb52481f73ca45c79022a513ea5875c853f787672edd23cdfe5cef5a24fd62ec26ad37dc123119c9bce00421f86eb8f24e1dcf44804e7a62fc7706e7aaa2c36bd979acfc6706efa51f3b883b9e57963102b9ae14321831589841333157e331c0164c657e45fbc1885cacf714749cc53f843c2a924f024386d271c1f17d330b29193ab6ae7a82abf139c70951ec842a6414210ca50263c93e0e491ea0f04df890a540c140ab10c9a15708e718a8e43f1e2d4f14d10f3b4cd7af072e49acd9702dabf80eb2f275db3796fe49acdfb63d76c2e96c5e63752f358ec9acd279aba06407514dfa784078b5a835d63c0421f56b0e0acbc6795e0a3a8da25006bc6c0abc060a46b40c848111a20d7f85e9a8ccb4b5d29336315a12c392460b0002c05bca241aea977d3057f21cd8779e107cc37a0e2eb50058d01afa68739c64b5dd3b4340f046d987806b02f1b12bda9c064f39c41bc442ccdb58aa65e39420eb29b390664029c1e2e7521ee4ccd830aec5818bb26848f039ccfc91b5e0ecd66965604c0126315d59cac47b828739114474b5d375cb7da9a6183560386eecb9e264c728759da9866583823406514d76c2852ba21b78eb05869ccd274e0988e9fd3f0d3c8f974d754e1bb85d7d590a5c9fb16106f5d7770486cf838288ae60d6669b0a04337420d700d1f35b76016f1072acc2c8d3407ea306000b20eb917aaa8ec0c28304b23936059254988ed2bfc111acf2ccd04628378da03a060d5587a493399a5c17acaf4dc31cd84d20c44d9d0ec1c4c780d1ae05a207dccd240a6a8fad54a41e4d99e3d0646334b0324600d0981e4c25ac4756403c439700d8b595ab53ea6f4936a155519cb2ab3b4844c62bac5138d595ae371700ef9e1521745a06c3820a230a21571c52c2d9c9f7e0e842d0523362965862cadda3d200d9941b5f812b3b4eac70cf0d4c66d2dcc80ccd26ad409e570345827334b33354726d03ada4bb599a545dd2c54a83a8c0c85595a45ef9149d4de7093a3114babee8dddd858c386c189a59da823150f3ee459a283e62924cf5c03b1921c8d7043fc8760396b186ebd60111d12b738c348442dbd4a54749c21d727931123236b0f498b8e27c208a9abbd0fab4dcf2d890edecaab0749e8b69149d149ab501b9f61278dab9cce9d4a389da5b34c04d4a911179ddb6a75037198a3aae945c1293a031eaddec3706bd24216203a676b5c5f2b0c0fe582ed5708e5ab5c273a699e36e0ef118fef8c4bb6fe23d1f9b3a866eb2f4219be13df82fd59b2681b0ba2a26dac8a8bb6f186b2d0ff8d9a9be3a26dd84d8af664ce4357b8a62241864c92e39392c4e989a1ca539219d586ea8713cdd5077dde5a91249e2fd2bea16702170d2f05bc4f40832b7c35fccecc77848a763a52153cde5c11dc1e21659e5316c636b87e7b1228f3920828f3d2182873675998196aee8b8132f737279e32c5408977c03ecdb6bc31024a0586e6e3e6326eaab850335d2c0e90e05d0b6e59e18247eeadc112174ba5145051222f072c3ae1490c2cbe758064c6318ace0c2464c826a6a5387ed18630047a4a9b84f0c51999342183e994fd6121604359c6ab6a4e2576238f5e9ca2bcaea2b8a700f9376c5966730e6fe4539bcfc240ad5cdeb05023d4016aa44dec061615e02facc13ef90c6fa2dab088574d3fdcc847bd4853dc54f25593854d126676839a7891dea6ce7a3b39455e1a607603503a1eb1194b5672fce08004a6a130bb71067c1861442287bda5d1a6bce4a99619ed41c54ae30a71d231951c3801998765035f607683ccc32102e2241e06e31a16a4f5196637525f20529e4424460cf89e839be3cc6e603946a7107ab851e200b1f37321776776d3ecb891d80d85b5b358b4c767584e0f44f3042489f68a432ce7a228f61d2f8e7de7aab2b05fa1e6ee38f69db7358d7d08708fce47e06f0b5b14fb66093812d0064822338653022157cbe9720fc8c74516c7beef85db8e1ef04900d735060d53cea71cf0158a7d0b0893873ccf9307380e2d7b1d5ef61a2aaf6171aa39b8e5ee85dd4dcdd23d24cc6e4ef01a161f2f63063fe247abf2d1a026c5be03540cb4c585dfa03cfea9346790623f7a10de53f116ca872724ae46b16f3a210828866d25291fc7be0333550d65b061e7e2412d8e7d4aab7437d48601b3f07ac8ecab15e24ea12e1cfb8c95158e18f5f1e939e12156a2e7a06726bad05338f6b1236d6accc03a19693dae512c0f6abaa7409c70ece332c8c3449f739c12dcb39173db8e2b1fece1bc7c9e2db524b4b1a14957a8ccec438d234b92ba82e9cceca38ea189d117e90d2564f6dccf4a3e29d183997dd431d24d1ae22ad2902b1d66f63a2474daf34a9c0ff296822d29fb19da57893426ce41e74b3a2549c36466af39311a58347043018a0086bcd49799bd5ea5f6203c4e73e4069a892330b38f1fc91b519551ec85cc5e76a52326e03838db51260c1097997dc5037315cf931a33b34f284e7a1b958f66665fe19f709848dffef0102b9d14e0e9d4135176dcb24964bf1a65c72d665938e3783af5d56476dcb22bca8e5bde1a67c72d41596c39879aa5383b6eb9b14e76bcece8cd9307a74aca0464c7c31386afaba25f999918bff1aaa99bb6f6ab061ff10340b06e8032a158667f229fcabd298377f834584c0265f51d5cbe9b254c802ac6b48627bf7085b2e3f12162c1b88cf58143787e4965513c0b0cb3a35372f0a2719c4206982946ab0113f1f810ac3b9919c025cf976f1480934a2a09408e7407551c9df73d3c1f1e2a57032ec9a886428f3c8ee58bb263ba6f2ab6a42efd4af042e49b4bbf01689f84eb2f54bcc971d92584ece5b5081fec275413389baec4172ab1c4f786a3e34a719c50c5f754b7f6c365656a667cfa7069eac6adfd331347270e96c6fb9563d382503d72f4f0d4f4e4d67eb870e468491c1bbf50459837f72b374e1c3a56dccac4d4f4fa15e95740035aa58923efd8529c1e3f0ca6a36ebc9b843170334ab968082993508350adab4c420d429595a9d025a9059ff9d5d125a905d79c54544101ae3931ac500111563c484ee0ca35a719b05c73ea206b266c71b8e6986492e9d635e5603fd79c345c510bae3969c0a2165c7340990a5daa95e09a53ad4b42098927d71c8435eddd33ae398937cfeabe7cc635a749b26ba39a4313ea8a5ed17e6b34a3ae50cae2d267910bde5a39a50e8d1f3e5a47c5311d12134d293c1c077601fc1a54935be3d0286aba3166e2c61cbf4c26f50dc5542996974503d20106144d29426b4ca2444f1e2b4dbc73189f2ea38ea694143ac4b1552790684ad509091a9887e497c92ebfec7a05afa868e3d6fe1ba64b17b2f4a1cdf0089a5275e326f1509a52956133298e4d4fdc74216d45e2723f3c46d715df8b0308260a45906384114453aa52f5f19af4c0532a452bd287a6548a5a7802ebf1944ad30b15e22995a6172ac4532a552f5088a75463bd6c09144fa934bd50219e52697aa1423ca5d2f44285784ad5d7cb8b1cc8342e4d2f5488695c9a5ea810d3b8d43c0f0a318dabd1cbd42b022ba471297aa1424ce39219eafa3a6f45128da3e4b17d9fc8ee8e92c7f6fd6571c5c548957627a9d2f66390531e2189d9982a6dbf13a41752f3fd3155dafe91b2d8be2375216949ca68e29ba0c8f8207f8487a1c8570c53aef73d5b1ed0e1071fe0399481f0dd0dddcdcb77b2700cb90cc71c2ab7343c7e1b92da614fc5b6343367e7e9dd2c64969481702526df482d4a3506fcaa03b5c46ed38e5b820722a476dc064682bdc10349a0763c1871ca1d7f1f03b5e3e1b2d83145cd2762a0763cd902a7341a704a13abb3838b2dd3c517812c437363724940f5f39ea906eb71db86b5b13b087f60e104df4a709957dc52e0386e58e78008024334340b49b9a91940311d02ca432e6aaa165c033e9aa33e43d4079a9caaa1a7e492b0e8b3e1ba6e0d22a935f12d12f3f8a4aff11b4faa546150a5cd34e85e022a6ba8784e36087ff36ba32475bcd186608253ee5c13bc14b966673fa0fd1db8fe526b9cd2800a54c329611de74508e3dbbb0831a14a4057cc78bc1425214235958100f5e03d3ccbabe076e8ca88de99463fbf4d5d33db8d88dfa182846a4d1eaad00a0a3365a454ad543ea13453b5526ee20298ae56ff255c00d3f59a99e00298a618460a17c054c540232e80a98a81465c005315038d424ed94831762017c054c540232e80698a619872013cd884547201549a904a2e804d57d0094eb96b42b4df16cda85d90ff77aac8296ffb43734a031878534e69003f7cbd9c321cb8354e094f68c029ebc4104da93ad5bfa2ecf394c2ea5fc92a8d28963029f194aa4701309185b1146e8b7be95981a754437ec21a86af662679661d15794a85e9b3918a3ca52aa763ad8a3ca59a53a8b6ba148a296744a1da397927c1ac5591a7542598b52af294aa9b31122a32a76cc88a997d32a7acebef848acc29ebfa3ba12273cab4a4862a32a74c5de7c03c0e5fcd4c09495910686b302d246541a0adc106c434c150e35434f42b913d1da5a2a1b365b10b7f26973d9d245ebbfb20432d9112bbfb63e2b55b05e9516ae662e2b57b47590cfd3895a1bafc832b3c982c3978aac40c7528bae3e883b22d8f9a4d035f6474c357cd6d7af7c4a577f6dcf09d3d0f8a850b9c8af2996e58b4298afbeb96af797858e26ad0993828bfc4d4e45c28c150f79c1f9c8a90dab3b92c76e3f55349a0f65c1131d43d6f8e81da932f8b3dddd43c1803b567b29517403df95e23be86282b4e44e5f1d743f2cd46df0b7fffc557f0c7480454782307d541b27e5f9ebbf97cecc607c7f2bd7f88217c8b111f64eb78c289bbe7126666a84a05e5c7171c15ee825d79d71337b675ec492f4e92e28e4eaaa15e722a56dc51655dc51fb20c78f4408319aa7c62fce624aedb92cb8704431d7e34782d72cdf03f01daf88fb8bd9674cdf07723d70cff3876cdf04b6531fc096abe1abb66efa2e68b07cfaf5c3cf85c932d4b916f1ae2bbd6a072724f1ab783c93596a28fe19bc9b8adaae10becbafc910c7c5e4b5bcd5460f0bedc42d6b7a318bf6225dfb632d081d235f28a4af769c359afa0f58918defb83e0c108a8bdff5d167b7be0fa832d5179b0b72e95276b759d6c9549926ce41c0997eb2771b2b11e4fb6f1949f7322d9283323224a8911adaca82e147e322d925f645ad4ab2a0b53f9861a912e147e8df755490fe21df5b589f560de515f9d5811e61dcdf756b7f1de2afd98b15a27d686794743a5581be61d0d958ad60f679aad1fe42fe1f848b2814ea132cc3b1ae9142ac3bca3914ea132cc3beae994f458c83b520288e889c42d2d825013e61de9fb62fdc79877440a25833a010ff38e2671a430ef8895aa3f4b997760a7f18a9d0d998d70a6cadfd9857b5995e9890eabf4edf213930af30e6873162ed24025ce5503f839668747922814f5557834d5d69c9c4c4c7c24c9f7f9684cafd981a02349ca57f97b44f6d12861e53f0809eb37484f1e6d90b1ea2ce712bf490fd76e755673e14fb96b7fd950c106e2adbdc2c5c19e48b1825716f98fc1f53d7fe0151cb8bdf90a0e845ef70a2e1ab8a5151c3ea1fe0aaede447ebda70266922ceb21536e782a20eb56f56cae3c15685c105a3915d0cd3aa702d57ad59e0ad4d5abf25420b550353d1530cd3aa702f5f4aa3c1568a8172a141eb4fd3ea702b659e754a0915ea81067d234bdf4dfff54c070cd3aa702697aa14215a70229059e5770297aa142e16bdba15ef2e7c69e6224631e1278944979178ceb5a0d6efc0be5e834a5016ed9d670cbd6c14dfecb0b150af26bdbe9740de2ad23116f8dab2dbfb6dd34de3a1ac51bfdba9ef5e3d7b653e809cdd38eaa795a5f3f7e6dbbe93ced88e7e9f4d431b9dfea432540e4949c11e1d6c9b8c902ddd0b1fcda362b56e1d8e4aa9f5edba652b5ff19d159886ad5fe1f9645e12a7ce7b9905c1fedff2dd4d66f4b89030bcab7860ba103dd50d94e53f30df1b2e9c08530c87a6adaf1b2e900ac7ff77f8d974df7de13fec33c73afe79f62ea4efccb33e2c07c591c18a4b13f705236ef1e9e3bd1e45f9e3adb71b2bbdcdbdbd72b0e3c5d1007be250ee4f3a3a365fc1797a27f32e9c04fe3917f1d8e5c2e77f58aeb1615c4750bc33ed9449febce0ffb40f1ee014913240d920c32288a66bef6e14347a74a63dbdb162d6e5bf2ff";
        zippedInitCodeAt = zippedInitCode.store();
    }

    function test_LibInflate_puff() external {
        bytes memory zippedData = zippedInitCodeAt.unstore();
        uint256 g = gasleft();
        (, bytes memory out) = InflateLib.puff(zippedData, UNZIPPED_SIZE);
        emit log_named_uint('gas used', g - gasleft());
        _testDeflated(out);
    }

    function test_Inflate2_inflateFrom() external {
        uint256 g = gasleft();
        bytes memory out = this.inflateFrom(
            zippedInitCodeAt, 1, zippedInitCodeAt.code.length - 1, UNZIPPED_SIZE
        );
        emit log_named_uint('gas used', g - gasleft());
        _testDeflated(out);
    }

    function _testDeflated(bytes memory initCode) private {
        IC a;
        assembly {
            a := create(0, add(initCode, 0x20), mload(initCode))
        }
        FD memory fd = a.field_193([uint24(1), uint24(2), uint24(3), uint24(4)]);
        assertEq(fd.z, '<path d="M60 72v75a50 50 0 0 0 50 50 50 50 0 0 0 50-50V72Z" fill="#000001"/><path d="M100 72v60H80V72h20Zm0 124a50.207 50.207 0 0 0 10 1 50.2 50.2 0 0 0 10-1v-64h-20v64Zm40-9a49.923 49.923 0 0 0 20-40v-15h-20v55Zm-80-40a49.924 49.924 0 0 0 20 40v-55H60v15Zm60-75v60h20V72h-20Z" fill="#000002"/>');
    }
}

struct FD {
    string x;
    uint256 y;
    string z;
}

interface IC {
    function field_193(uint24[4] calldata x) external returns (FD memory);
}